-- Generated by Oracle SQL Developer Data Modeler 21.2.0.183.1957
--   at:        2021-12-11 18:42:29 PKT
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE contract (
    hospital_hosid  VARCHAR2(100) NOT NULL,
    stores_store_id VARCHAR2(100) NOT NULL,
    contractid      VARCHAR2(100) NOT NULL
);

CREATE UNIQUE INDEX contract__idx ON
    contract (
        contractid
    ASC );

ALTER TABLE contract ADD CONSTRAINT contract_pk PRIMARY KEY ( hospital_hosid,
                                                              stores_store_id );

CREATE TABLE dealer (
    dealid  VARCHAR2(100) NOT NULL,
    name    VARCHAR2(200) NOT NULL,
    address VARCHAR2(200),
    phoneno VARCHAR2(200) NOT NULL
);

CREATE INDEX dealer__idxv1 ON
    dealer (
        dealid
    ASC );

ALTER TABLE dealer ADD CONSTRAINT dealer_pk PRIMARY KEY ( dealid );

ALTER TABLE dealer ADD CONSTRAINT dealer_dealid_un UNIQUE ( dealid );

CREATE TABLE doctor (
    docid   VARCHAR2(100) NOT NULL,
    docname VARCHAR2(200) NOT NULL
);

CREATE UNIQUE INDEX doctor__idx ON
    doctor (
        docid
    ASC );

ALTER TABLE doctor ADD CONSTRAINT doctor_pk PRIMARY KEY ( docid );

CREATE TABLE hospital (
    hosid   VARCHAR2(100) NOT NULL,
    name    VARCHAR2(200),
    address VARCHAR2(200) NOT NULL,
    phoneno VARCHAR2(200)
);

CREATE UNIQUE INDEX hospital__idx ON
    hospital (
        hosid
    ASC );

ALTER TABLE hospital ADD CONSTRAINT hospital_pk PRIMARY KEY ( hosid );

CREATE TABLE medicine (
    med_id       VARCHAR2(100) NOT NULL,
    name         VARCHAR2(200) NOT NULL,
    mfg_date     DATE,
    exp_date     DATE,
    composition  VARCHAR2(200),
    cost_per_tab INTEGER
);

COMMENT ON COLUMN medicine.exp_date IS
    '			';

CREATE UNIQUE INDEX medicine__idx ON
    medicine (
        med_id
    ASC );

ALTER TABLE medicine ADD CONSTRAINT medicine_pk PRIMARY KEY ( med_id );

CREATE TABLE patient (
    patid   VARCHAR2(100) NOT NULL,
    name    VARCHAR2(200) NOT NULL,
    address VARCHAR2(200),
    phoneno VARCHAR2(200) NOT NULL
);

CREATE UNIQUE INDEX patient__idx ON
    patient (
        patid
    ASC );

ALTER TABLE patient ADD CONSTRAINT patient_pk PRIMARY KEY ( patid );

CREATE TABLE retail (
    medicine_med_id VARCHAR2(100) NOT NULL,
    stores_store_id VARCHAR2(100) NOT NULL,
    retail_id       VARCHAR2(100) NOT NULL,
    batchno         INTEGER,
    quantity        INTEGER
);

CREATE UNIQUE INDEX retail__idx ON
    retail (
        medicine_med_id
    ASC,
        stores_store_id
    ASC );

ALTER TABLE retail ADD CONSTRAINT retail_pk PRIMARY KEY ( medicine_med_id,
                                                          stores_store_id );

CREATE TABLE stores (
    store_id   VARCHAR2(100) NOT NULL,
    name       VARCHAR2(200),
    manager    VARCHAR2(200),
    address    VARCHAR2(200),
    contact_no VARCHAR2(200)
);

CREATE UNIQUE INDEX stores__idx ON
    stores (
        store_id
    ASC );

ALTER TABLE stores ADD CONSTRAINT stores_pk PRIMARY KEY ( store_id );

CREATE TABLE supplies (
    stores_store_id VARCHAR2(100) NOT NULL,
    suppliesid      VARCHAR2(100) NOT NULL,
    dealer_dealid12 VARCHAR2(100) NOT NULL,
    dealer_dealid1  VARCHAR2(200) NOT NULL
);

CREATE UNIQUE INDEX supplies__idx ON
    supplies (
        stores_store_id
    ASC );

ALTER TABLE supplies
    ADD CONSTRAINT supplies_pk PRIMARY KEY ( suppliesid,
                                             dealer_dealid12,
                                             stores_store_id );

CREATE TABLE transactions (
    patient_patid   VARCHAR2(100) NOT NULL,
    stores_store_id VARCHAR2(100) NOT NULL,
    quantity        VARCHAR2(200),
    purchasedate    DATE,
    total           INTEGER,
    patid           VARCHAR2(100) NOT NULL
);

CREATE UNIQUE INDEX transactions__idx ON
    transactions (
        patient_patid
    ASC,
        stores_store_id
    ASC );

ALTER TABLE transactions ADD CONSTRAINT transactions_pk PRIMARY KEY ( patient_patid,
                                                                      stores_store_id );

CREATE TABLE treatment (
    doctor_docid    VARCHAR2(100) NOT NULL,
    hospital_hosid  VARCHAR2(100) NOT NULL,
    treatid         VARCHAR2(100) NOT NULL,
    treatdate       DATE,
    patient_patid12 VARCHAR2(100) NOT NULL,
    patient_patid1  VARCHAR2(200) NOT NULL
);

CREATE UNIQUE INDEX treatment__idx ON
    treatment (
        treatid
    ASC );

ALTER TABLE treatment ADD CONSTRAINT treatment_pk PRIMARY KEY ( doctor_docid,
                                                                hospital_hosid );

ALTER TABLE contract
    ADD CONSTRAINT contract_hospital_fk FOREIGN KEY ( hospital_hosid )
        REFERENCES hospital ( hosid );

ALTER TABLE contract
    ADD CONSTRAINT contract_stores_fk FOREIGN KEY ( stores_store_id )
        REFERENCES stores ( store_id );

ALTER TABLE retail
    ADD CONSTRAINT retail_medicine_fk FOREIGN KEY ( medicine_med_id )
        REFERENCES medicine ( med_id )
            ON DELETE CASCADE;

ALTER TABLE retail
    ADD CONSTRAINT retail_stores_fk FOREIGN KEY ( stores_store_id )
        REFERENCES stores ( store_id )
            ON DELETE CASCADE;

ALTER TABLE supplies
    ADD CONSTRAINT supplies_dealer_fk FOREIGN KEY ( dealer_dealid12 )
        REFERENCES dealer ( dealid );

ALTER TABLE supplies
    ADD CONSTRAINT supplies_stores_fk FOREIGN KEY ( stores_store_id )
        REFERENCES stores ( store_id );

ALTER TABLE transactions
    ADD CONSTRAINT transactions_patient_fk FOREIGN KEY ( patient_patid )
        REFERENCES patient ( patid );

ALTER TABLE transactions
    ADD CONSTRAINT transactions_stores_fk FOREIGN KEY ( stores_store_id )
        REFERENCES stores ( store_id );

ALTER TABLE treatment
    ADD CONSTRAINT treatment_doctor_fk FOREIGN KEY ( doctor_docid )
        REFERENCES doctor ( docid );

ALTER TABLE treatment
    ADD CONSTRAINT treatment_hospital_fk FOREIGN KEY ( hospital_hosid )
        REFERENCES hospital ( hosid );

ALTER TABLE treatment
    ADD CONSTRAINT treatment_patient_fk FOREIGN KEY ( patient_patid12 )
        REFERENCES patient ( patid );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            11
-- CREATE INDEX                            11
-- ALTER TABLE                             23
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
